<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <!-- summnerNote -->
  <!--  jQuery, bootstrap -->
  <link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>

  <!-- summernote css/js-->
  <link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.css" rel="stylesheet">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.js"></script>

  <title>CMIC</title>
  <!-- include libraries(jQuery, bootstrap) -->
  <style>
        .infoTable{
            margin: 0 auto;
        }
        .infoTable th{
            background-color: #D9D9D9;
        }
        .infoTable th,tr {

            border: 1px solid #D9D9D9;
            border-collapse: collapse;
        }
        .infoTable thead, tfoot{
            text-align:center;
        }

        #info_div{
	        width: 700px;

        }
        .infoListButton{
            text-decoration: none;
        }
        #infoOne_btn{
            margin: 0 auto;
        }

        #title_ip {
          width:700px
        }

    </style>
</head>
<body>
  <div id="infoOne">
    <form action="/carbonInfo/carbonInfoModifySelect/run" method="post">
      <table class="infoTable">
        <thead>
        <tr>
          <th width="100" height="35" style="text-align: center;">제목</th>
          <td colspan="3" height="35" ><input id="title_ip" type="text" name="infoTitle" maxlength="30"
                                              th:value="${carbonInfo.infoTitle}"
                                              placeholder="제목을 입력해주세요."></td>
        </tr>
        <tr>
          <th width="100" height="35" style="text-align: center;">작성일</th>
          <td width="350" height="35" th:text="${carbonInfo.infoDate}" name="infoDate"></td>
          <th width="100" height="35" style="text-align: center;" >조회수</th>
          <td width="350" height="35" th:text="${carbonInfo.infoDate}" name="infoView"></td>
        </tr>
        <tr>
          <th width="100" height="35" style="text-align: center;">출처</th>
          <td width="350" height="35"><input type="text" name="infoSource" maxlength="20"
                                        placeholder="출처를 입력해주세요." th:value="${carbonInfo.infoSource}"></td>
          <th width="100" height="35" style="text-align: center;">작성자</th>
          <td width="350" height="35" name="adminJob" th:text="${carbonInfo.admin.adminJob}"></td>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td colspan="4">
            <textarea class="summernote" name="infoContent"
                                         th:value="${carbonInfo.infoContent}"
                                         th:utext="${carbonInfo.infoContent}"></textarea>
            <input type="hidden" name="infoNo" th:value="${carbonInfo.infoNo}" >
          </td>
        </tr>
        <tr>
          <th width="100" height="35" style="text-align: center;">첨부파일</th>
          <td colspan="3"> <input type="file" name=""> </td>
        </tr>
        </tbody>

      </table>
      <button type="submit" >수정</button>
    </form>
  </div>

  <script>
  $('.summernote').summernote({
        height: 150,
        lang: "ko-KR"
      });

      $('#summernote').summernote({
		height: 300,
		width : 1000,
		minHeight: 500,
		maxHeight: null,
		focus: true,
		lang: "ko-KR",
		callbacks: {
			onImageUpload : function(files){
				updateFile(files[0],this);
			}
		}

	});

	function updateFile(file, editor){
		var data = new FormData();
		data.append("file", file);
		console.log(file);
		$.ajax({
			data : data,
			type : "POST",
			url : "SummerNoteImageFile",
			contentType : false,
			processData : false,
			success : function(data){
				console.log(data);
				console.log(editor);
				$(editor).summernote("insertImage",data.url);
			}
		});
	}

  </script>
</body>
</html>